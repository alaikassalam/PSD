Traceback (most recent call last):
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\jupyter_core\utils\__init__.py", line 154, in wrapped
    asyncio.get_running_loop()
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\jupyter_cache\executors\utils.py", line 58, in single_nb_execution
    executenb(
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\jupyter_core\utils\__init__.py", line 158, in wrapped
    return loop.run_until_complete(inner)
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\asyncio\base_events.py", line 646, in run_until_complete
    return future.result()
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "D:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# --- Konfigurasi ---
JUMLAH_SAMPEL = 100      # 100x rekaman per kata
DURASI_REKAMAN = 1.5    # Durasi rekaman dalam detik (sesuaikan jika perlu)
SAMPLE_RATE = 22050     # Standar untuk speech recognition
KATA_TARGET = ["buka", "tutup"]
FOLDER_DATA = "./dataset/data-hasil"
# --------------------

def rekam_audio(durasi, sr):
    """Merekam audio dari mikrofon default."""
    print("Merekam...")
    audio = sd.rec(int(durasi * sr), samplerate=sr, channels=1, dtype='float32')
    sd.wait()  # Menunggu rekaman selesai
    print("Rekaman selesai.")
    return audio

def simpan_audio(audio, filename, sr):
    """Menyimpan audio ke file WAV."""
    # Normalisasi audio untuk menghindari clipping (jika terlalu keras)
    audio = audio / np.max(np.abs(audio))
    # Konversi ke 16-bit integer (format WAV standar)
    audio_int16 = (audio * 32767).astype(np.int16)
    wav.write(filename, sr, audio_int16)
    print(f"File disimpan di: {filename}")

def main():
    print("--- Skrip Perekam Data Audio ---")
    print(f"Target: {JUMLAH_SAMPEL} sampel per kata.")
    print(f"Kata: {', '.join(KATA_TARGET)}")
    print("----------------------------------\n")

    # Membuat folder data utama jika belum ada
    if not os.path.exists(FOLDER_DATA):
        os.makedirs(FOLDER_DATA)

    for kata in KATA_TARGET:
        print(f"\n======= MULAI MEREKAM KATA: '{kata.upper()}' =======")
        
        # Membuat sub-folder untuk setiap kata
        folder_kata = os.path.join(FOLDER_DATA, kata)
        if not os.path.exists(folder_kata):
            os.makedirs(folder_kata)
        
        print(f"Data akan disimpan di folder: {folder_kata}")
        print("Tekan ENTER untuk memulai rekaman pertama...")
        input() # Menunggu kesiapan pengguna

        for i in range(JUMLAH_SAMPEL):
            print(f"\n--- Merekam sampel ke-{i+1}/{JUMLAH_SAMPEL} untuk '{kata.upper()}' ---")
            
            # Beri waktu pengguna untuk bersiap
            try:
                print("Bersiap dalam 3...")
                time.sleep(1)
                print("2...")
                time.sleep(1)
                print("1...")
                time.sleep(1)
                print("BICARA SEKARANG!")

                # 1. Rekam
                audio_rekaman = rekam_audio(DURASI_REKAMAN, SAMPLE_RATE)
                
                # 2. Simpan
                # Format nama file: buka_001.wav, buka_002.wav, ...
                nama_file = f"{kata}_{i+1:03d}.wav" 
                path_file_lengkap = os.path.join(folder_kata, nama_file)
                simpan_audio(audio_rekaman, path_file_lengkap, SAMPLE_RATE)

                # Jeda singkat antar rekaman
                time.sleep(0.5)

            except KeyboardInterrupt:
                print("\nProses dihentikan oleh pengguna.")
                return
            except Exception as e:
                print(f"Terjadi error: {e}")
                print("Mencoba lanjut ke sampel berikutnya...")
                continue
    
    print("\n\n======== PENGUMPULAN DATA SELESAI! ========")
    print(f"Semua data tersimpan di folder '{FOLDER_DATA}'.")

if __name__ == "__main__":
    main()
------------------

----- stdout -----
--- Skrip Perekam Data Audio ---
Target: 100 sampel per kata.
Kata: buka, tutup
----------------------------------


======= MULAI MEREKAM KATA: 'BUKA' =======
Data akan disimpan di folder: ./dataset/data-hasil\buka
Tekan ENTER untuk memulai rekaman pertama...
------------------

[1;31m---------------------------------------------------------------------------[0m
[1;31mStdinNotImplementedError[0m                  Traceback (most recent call last)
Cell [1;32mIn[4], line 85[0m
[0;32m     82[0m     [38;5;28mprint[39m([38;5;124mf[39m[38;5;124m"[39m[38;5;124mSemua data tersimpan di folder [39m[38;5;124m'[39m[38;5;132;01m{[39;00mFOLDER_DATA[38;5;132;01m}[39;00m[38;5;124m'[39m[38;5;124m.[39m[38;5;124m"[39m)
[0;32m     84[0m [38;5;28;01mif[39;00m [38;5;18m__name__[39m [38;5;241m==[39m [38;5;124m"[39m[38;5;124m__main__[39m[38;5;124m"[39m:
[1;32m---> 85[0m     [43mmain[49m[43m([49m[43m)[49m

Cell [1;32mIn[4], line 46[0m, in [0;36mmain[1;34m()[0m
[0;32m     44[0m [38;5;28mprint[39m([38;5;124mf[39m[38;5;124m"[39m[38;5;124mData akan disimpan di folder: [39m[38;5;132;01m{[39;00mfolder_kata[38;5;132;01m}[39;00m[38;5;124m"[39m)
[0;32m     45[0m [38;5;28mprint[39m([38;5;124m"[39m[38;5;124mTekan ENTER untuk memulai rekaman pertama...[39m[38;5;124m"[39m)
[1;32m---> 46[0m [38;5;28;43minput[39;49m[43m([49m[43m)[49m [38;5;66;03m# Menunggu kesiapan pengguna[39;00m
[0;32m     48[0m [38;5;28;01mfor[39;00m i [38;5;129;01min[39;00m [38;5;28mrange[39m(JUMLAH_SAMPEL):
[0;32m     49[0m     [38;5;28mprint[39m([38;5;124mf[39m[38;5;124m"[39m[38;5;130;01m\n[39;00m[38;5;124m--- Merekam sampel ke-[39m[38;5;132;01m{[39;00mi[38;5;241m+[39m[38;5;241m1[39m[38;5;132;01m}[39;00m[38;5;124m/[39m[38;5;132;01m{[39;00mJUMLAH_SAMPEL[38;5;132;01m}[39;00m[38;5;124m untuk [39m[38;5;124m'[39m[38;5;132;01m{[39;00mkata[38;5;241m.[39mupper()[38;5;132;01m}[39;00m[38;5;124m'[39m[38;5;124m ---[39m[38;5;124m"[39m)

File [1;32mD:\Laragon\laragon\bin\python\python-3.10\lib\site-packages\ipykernel\kernelbase.py:1274[0m, in [0;36mKernel.raw_input[1;34m(self, prompt)[0m
[0;32m   1272[0m [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m [38;5;28mself[39m[38;5;241m.[39m_allow_stdin:
[0;32m   1273[0m     msg [38;5;241m=[39m [38;5;124m"[39m[38;5;124mraw_input was called, but this frontend does not support input requests.[39m[38;5;124m"[39m
[1;32m-> 1274[0m     [38;5;28;01mraise[39;00m StdinNotImplementedError(msg)
[0;32m   1275[0m [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39m_input_request(
[0;32m   1276[0m     [38;5;28mstr[39m(prompt),
[0;32m   1277[0m     [38;5;28mself[39m[38;5;241m.[39m_parent_ident[[38;5;124m"[39m[38;5;124mshell[39m[38;5;124m"[39m],
[0;32m   1278[0m     [38;5;28mself[39m[38;5;241m.[39mget_parent([38;5;124m"[39m[38;5;124mshell[39m[38;5;124m"[39m),
[0;32m   1279[0m     password[38;5;241m=[39m[38;5;28;01mFalse[39;00m,
[0;32m   1280[0m )

[1;31mStdinNotImplementedError[0m: raw_input was called, but this frontend does not support input requests.

